# Docusaurus Templates for cargo-doc-md

This directory contains the necessary files to integrate Rust documentation generated by `cargo-doc-md` into a Docusaurus site.

## Files Structure

```
templates/
├── RustCode/
│   ├── index.tsx              # React component for Rust code highlighting
│   └── styles.module.css      # Component-scoped CSS (CSS Modules)
├── rust-documentation.css     # Global Rust documentation styles
├── custom.css                 # Docusaurus custom.css with customization guide
└── README.md                  # This file
```

## Installation

### Option 1: Manual Installation

1. **Copy RustCode component:**
   ```bash
   cp -r templates/RustCode/ /path/to/docusaurus/src/components/
   ```

2. **Copy Rust documentation CSS:**
   ```bash
   cp templates/rust-documentation.css /path/to/docusaurus/src/css/
   ```

3. **Add CSS to docusaurus.config.js:**
   ```javascript
   module.exports = {
     // ... other config
     stylesheets: [
       {
         href: '/css/rust-documentation.css',
       },
     ],
   };
   ```

4. **Update custom.css (optional):**
   - Open `templates/custom.css` to see customization examples
   - Add variable overrides to your `src/css/custom.css` if needed

### Option 2: CLI (Coming Soon)

```bash
cargo-doc-docusaurus components sync /path/to/docusaurus
```

## Customization

The Rust documentation styles use **CSS Custom Properties (variables)** for easy customization. All colors, spacing, and layout can be overridden in your `custom.css` without modifying the source files.

### Available CSS Variables

#### Item Colors (Light Mode)
```css
:root {
  --rust-color-module: rgb(173, 124, 0);           /* Modules (gold) */
  --rust-color-module-hover: rgb(200, 140, 0);
  --rust-color-struct: rgb(0, 125, 119);           /* Structs/Enums (cyan) */
  --rust-color-struct-hover: rgb(0, 150, 140);
  --rust-color-trait: rgb(110, 79, 201);           /* Traits (purple) */
  --rust-color-trait-hover: rgb(130, 100, 220);
  --rust-color-function: rgb(0, 92, 197);          /* Functions (blue) */
  --rust-color-function-hover: rgb(0, 110, 220);
  
  /* Prism Syntax Highlighting */
  --rust-prism-class-name: rgb(0, 92, 197);
  
  /* Spacing */
  --rust-item-spacing: 0.35em;
  --rust-field-indent: 1.5em;
}
```

#### Item Colors (Dark Mode)
```css
[data-theme='dark'] {
  --rust-color-module: rgb(255, 180, 84);
  --rust-color-module-hover: rgb(255, 200, 120);
  --rust-color-struct: rgb(45, 191, 184);
  --rust-color-struct-hover: rgb(80, 220, 210);
  --rust-color-trait: rgb(178, 162, 253);
  --rust-color-trait-hover: rgb(200, 180, 255);
  --rust-color-function: rgb(141, 219, 255);
  --rust-color-function-hover: rgb(170, 230, 255);
  
  --rust-prism-class-name: rgb(139, 233, 253);
}
```

### Customization Examples

#### Example 1: Orange Modules
```css
/* In your src/css/custom.css */
:root {
  --rust-color-module: rgb(255, 120, 0);
  --rust-color-module-hover: rgb(255, 150, 50);
}

[data-theme='dark'] {
  --rust-color-module: rgb(255, 160, 80);
  --rust-color-module-hover: rgb(255, 180, 100);
}
```

#### Example 2: Increase Spacing
```css
:root {
  --rust-item-spacing: 0.5em;        /* More space between items */
  --rust-field-indent: 2em;          /* More indentation */
}
```

#### Example 3: Match Your Brand Colors
```css
:root {
  --rust-color-struct: var(--ifm-color-primary);
  --rust-color-struct-hover: var(--ifm-color-primary-light);
}
```

## Component Architecture

### RustCode Component

The `RustCode` component provides syntax-highlighted Rust code with clickable type links.

**Props:**
- `code: string` - The Rust code to display
- `links?: TypeLink[]` - Optional array of type links `[{text: "Type", href: "/path"}]`
- `inline?: boolean` - Inline mode (no background, for signatures)

**Usage in MDX:**
```tsx
import RustCode from '@site/src/components/RustCode';

<RustCode code="pub fn main() {}" />
<RustCode inline code="fn example(arg: String)" />
<RustCode 
  code="fn process(user: User)"
  links={[{text: "User", href: "/docs/struct.User"}]}
/>
```

### CSS Architecture

**Component-scoped (CSS Modules):**
- `RustCode/styles.module.css` - Styles specific to the component
- Scoped automatically by Webpack
- No global namespace pollution

**Global styles:**
- `rust-documentation.css` - Item colors, spacing, Prism fixes
- Loaded via `docusaurus.config.js`
- Uses CSS variables for customization

**Why this structure?**
- ✅ Follows Docusaurus best practices
- ✅ Easy to update (overwrite files)
- ✅ No conflicts with user's `custom.css`
- ✅ Theme-aware (respects dark/light mode)
- ✅ Customizable without editing source

## Color Scheme

The default color scheme is inspired by rustdoc:

| Item Type | Light Mode | Dark Mode |
|-----------|------------|-----------|
| Modules | Gold | Light Gold |
| Structs/Enums | Cyan | Light Cyan |
| Traits | Purple | Light Purple |
| Functions | Blue | Light Blue |

All colors can be customized via CSS variables!

## Development Workflow

1. Edit converter or templates
2. Run `./regenerate-example.sh` (from cargo-doc-md root)
3. View changes in example-docs with `npm start`

## Syncing to External Project

Until the CLI is ready, manually copy:

```bash
# From cargo-doc-md root
cp -r templates/RustCode/ ../your-project/docs/src/components/
cp templates/rust-documentation.css ../your-project/docs/src/css/

# Then add to docusaurus.config.js:
# stylesheets: [{href: '/css/rust-documentation.css'}]
```

## Future: CLI Commands

Coming soon:
```bash
# Sync all components
cargo-doc-docusaurus components sync <docusaurus-path>

# Show component info
cargo-doc-docusaurus components show

# Initialize new project
cargo-doc-docusaurus components init <docusaurus-path>
```
