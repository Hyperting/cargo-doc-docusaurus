# DocSidebarItem/Link Component

**Swizzled Docusaurus component** that extends the default sidebar link behavior to apply Rust item type classes (`rust-mod`, `rust-struct`, `rust-trait`, etc.) for proper color coding in the sidebar navigation.

## What is Swizzling?

"Swizzling" in Docusaurus means replacing a built-in component with your own customized version. This component extends `@theme/DocSidebarItem/Link` to add Rust-specific styling.

## Why This Component?

By default, Docusaurus sidebar links don't know about Rust item types. This component:

- ‚úÖ **Applies className from sidebar config** to the actual `<Link>` element
- ‚úÖ **Enables color-coded sidebar items** (modules in gold, structs in cyan, etc.)
- ‚úÖ **Preserves all default Docusaurus behavior** (active states, hover, navigation)
- ‚úÖ **Works with RustCrateLink and RustModuleTitle** for special title rendering

## Installation

### Prerequisites

- Docusaurus 3.x site
- `cargo-doc-docusaurus` generated documentation
- `rust-documentation.css` installed (contains `.menu__link.rust-*` styles)

### Steps

1. **Create the theme directory structure:**
   ```bash
   mkdir -p your-docusaurus-site/src/theme/DocSidebarItem/Link
   ```

2. **Copy the component files:**
   ```bash
   cp templates/DocSidebarItem/Link/index.tsx.txt \
      your-docusaurus-site/src/theme/DocSidebarItem/Link/index.tsx
   
   cp templates/DocSidebarItem/Link/styles.module.css.txt \
      your-docusaurus-site/src/theme/DocSidebarItem/Link/styles.module.css
   ```

3. **Verify structure:**
   ```
   src/theme/DocSidebarItem/Link/
   ‚îú‚îÄ‚îÄ index.tsx           # Swizzled component
   ‚îî‚îÄ‚îÄ styles.module.css   # Component styles
   ```

## How It Works

### Default Docusaurus Behavior

```tsx
// Sidebar item config
{
  type: 'doc',
  id: 'rust/my_crate/struct.User',
  label: 'User',
  className: 'rust-struct'  // ‚ùå Not applied to link!
}

// Renders as
<li className="menu__list-item rust-struct">
  <Link className="menu__link">User</Link>  {/* No rust-struct here! */}
</li>
```

### With This Component

```tsx
// Same config
{
  type: 'doc',
  id: 'rust/my_crate/struct.User',
  label: 'User',
  className: 'rust-struct'  // ‚úÖ Applied to link!
}

// Renders as
<li className="menu__list-item rust-struct">
  <Link className="menu__link rust-struct">User</Link>  {/* ‚úÖ rust-struct applied! */}
</li>
```

Now the CSS rule `.menu__link.rust-struct { color: var(--rust-color-struct); }` works!

## Generated by cargo-doc-docusaurus

`cargo-doc-docusaurus` automatically generates sidebar configs with `className` set to the appropriate Rust item type:

```typescript
// Generated sidebars-rust.ts
{
  type: 'category',
  label: 'Modules',
  items: [
    { type: 'doc', id: 'rust/my_crate/agent', label: 'agent', className: 'rust-mod' },
    { type: 'doc', id: 'rust/my_crate/server', label: 'server', className: 'rust-mod' },
  ]
},
{
  type: 'category',
  label: 'Structs',
  items: [
    { type: 'doc', id: 'rust/my_crate/struct.User', label: 'User', className: 'rust-struct' },
    { type: 'doc', id: 'rust/my_crate/struct.Config', label: 'Config', className: 'rust-struct' },
  ]
}
```

## Code Explanation

### Key Change

The only modification from the default component is adding `className` to the `<Link>`:

```tsx
// Default Docusaurus
<Link
  className={clsx(
    'menu__link',
    !isInternalLink && styles.menuExternalLink,
    { 'menu__link--active': isActive },
  )}
  to={href}
>
  {label}
</Link>

// Our modification
<Link
  className={clsx(
    'menu__link',
    !isInternalLink && styles.menuExternalLink,
    className, // ‚úÖ Add className from sidebar item
    { 'menu__link--active': isActive },
  )}
  to={href}
>
  {label}
</Link>
```

### Special Handling

The component also handles custom Rust components for special sidebar items:

```tsx
// Rust crate title (with version badge)
if (customProps?.rustCrateTitle && customProps?.crateName) {
  return (
    <RustCrateTitle
      href={href}
      crateName={customProps.crateName}
      version={customProps.version}
    />
  );
}

// Rust module title (collapsible hierarchy)
if (customProps?.rustModuleTitle && customProps?.moduleName) {
  return (
    <RustModuleTitle
      href={href}
      moduleName={customProps.moduleName}
    />
  );
}
```

## CSS Integration

This component works in conjunction with `rust-documentation.css`:

```css
/* In rust-documentation.css */

/* Modules (gold/orange) */
.menu__link.rust-mod {
  color: var(--rust-color-module) !important;
}

.menu__link.rust-mod:hover {
  color: var(--rust-color-module-hover) !important;
}

/* Structs (cyan) */
.menu__link.rust-struct {
  color: var(--rust-color-struct) !important;
}

/* Traits (purple) */
.menu__link.rust-trait {
  color: var(--rust-color-trait) !important;
}

/* Functions (blue) */
.menu__link.rust-fn,
.menu__link.rust-constant,
.menu__link.rust-type {
  color: var(--rust-color-function) !important;
}
```

## Result

With this component installed, your sidebar will show:

- üü° **Modules** in gold/orange (`rust-mod`)
- üîµ **Structs/Enums** in cyan (`rust-struct`, `rust-enum`)
- üü£ **Traits** in purple (`rust-trait`)
- üîµ **Functions** in blue (`rust-fn`)
- üîµ **Constants/Types** in blue (`rust-constant`, `rust-type`)

All colors automatically adapt to light/dark mode using CSS variables!

## Customization

Colors are controlled by CSS variables in `rust-documentation.css`. Override them in your `custom.css`:

```css
/* In src/css/custom.css */

/* Change module color to orange */
:root {
  --rust-color-module: rgb(255, 120, 0);
  --rust-color-module-hover: rgb(255, 150, 50);
}

[data-theme='dark'] {
  --rust-color-module: rgb(255, 160, 80);
  --rust-color-module-hover: rgb(255, 180, 100);
}
```

## Troubleshooting

### Colors not showing in sidebar

1. **Check CSS is loaded:**
   - Verify `rust-documentation.css` is in `src/css/` or `static/css/`
   - Check `docusaurus.config.js` has `stylesheets: [{href: '/css/rust-documentation.css'}]`

2. **Check className is set:**
   - Open browser DevTools
   - Inspect sidebar link
   - Should see classes like `menu__link rust-mod`

3. **Check sidebar config:**
   - Open `sidebars-rust.ts` or generated sidebar file
   - Verify items have `className: 'rust-mod'` etc.

### Component not being used

Docusaurus caches swizzled components. Try:

```bash
npm run clear
npm start
```

### TypeScript errors

Make sure you have the required dependencies:

```bash
npm install --save-dev @types/react @docusaurus/theme-common
```

## Related Components

- **RustCrateLink** - Renders crate titles with version badges
- **RustModuleTitle** - Renders module titles in sidebar
- **RustCode** - Syntax-highlighted code blocks with type links
